<style type="text/css">
<!--
h1,h2,h3,h4,h5,h6 {	font-family: Verdana, Arial, Helvetica, sans-serif;}
.style6 {font-family: Verdana, Arial, Helvetica, sans-serif}
.style2 {font-family: "Courier New", Courier, mono}
.style3 {font-size: x-small}
.style4 {font-family: Verdana, Arial, Helvetica, sans-serif; font-size: x-small; }
.auto-style11 {font-family: Verdana, Geneva, Tahoma, sans-serif;
}
.auto-style3 {	border-width: 0px;
}
-->
</style>
</head>
<body class="style6" style="background-color: #808080">
<h1 class="auto-style3">&nbsp;SK6812 four languages word clock</h1>
<p>With this clock the time can be displayed as text in the languages ​​Dutch, 
French, English and German.<br>This clock was the ultimate challenge to make 
with its predecessor a single language word clock and Fibonacci clocks.<br>The 
software to control the clock is written for Arduino with a minimum memory of 
48K such as the cheap Arduino Nano Every.<br>In addition to controlling the 
correct time, there are many options that can be set in the program.<br>For 
example, a single language for a clock with 144 (12x12) LEDs, various membrane 
keypads, a rotary, digital displays, a DCF77 atomic time receiver, Bluetooth 
connection to a mobile phone, and support for SK6812 and other LED strips.</p>
<p class="auto-style3">&nbsp;</p>
<table>
  <tr><td><a href="4LanguageClock/IMG_5557.JPG">
	<img src="4LanguageClock/IMG_5557k.JPG" alt="Four language clock color" "></a></td><td>
	<a href="4LanguageClock/IMG_5560.JPG">
	<img src="4LanguageClock/IMG_5560k.JPG" alt="Four language clock white" ="450"></a></td>
</tr><tr><td>
		<font class="auto-style3">
<br>
		<p>&nbsp;</p>
		<p>The four-language word clock uses 625 SK6812 RGBW LED strips.<br>RGBW 
		LED strips have a white LED in addition to the red, green and blue LED.<br>
		This makes it possible to make the letters light up bright white. The 
		colors are also sparkling with these SK6812 LEDs.<br>The library used to 
		drive the LEDs also supports the use of many types of other LEDs.<br>
		<br><br>SK6812 LEDs each contain a small processor, which means that the 
		entire chain of LEDs can be controlled with one wire.</p>
  </font></td><td><div align="left">
			<a href="4LanguageClock/4-talenklok_IMG_1176.jpg">
			<img src="4LanguageClock/4languageclockIMG_1176.jpg" alt="Word clock with four languages" border="0"></a></div></td></tr></table>
<p><font class="auto-style3">&nbsp;&lt;- <a href="../index.html">Start page<br></a><br><img src="WoordklokSK6812_files/IMG_1554.jpg"><br>
<br>
</font>The color word clock consists of the parts as shown in the table below.<br>
You can order the electronics and PCB from me. I do not have the case and word 
plate in stock.<br>Having a word plate made will cost 300 to 500 euros. JPGs of 
two designs below.</p>
<br class="auto-style3"><span class="auto-style3"><strong>Accessories</strong></span><br>
<table cellspacing="0">
  <tr>
    <td class="xl67" width="277">1 x case for 50x50 cm word plate </td>
    <td class="xl74" width="136"><img alt="kast" src="Bouwpakket_files/image003.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x word plate <br>
      JPG-file with:<br>
      <a href="4LanguageClock/Viertalen-AlleLetters-23okt2018_50x50cm.jpg">All 625 characters</a><br>
	      <br>
          <a href="4LanguageClock/Viertalen-23okt2018_50x50cm.jpg">With a cross</a></td>
    <td class="xl75"> <a href="4LanguageClock/Viertalen-AlleLetters-23okt2018_50x50cm.jpg"><img alt="woordplaat" src="Bouwpakket_files/image001.jpg" width="100" class="auto-style3"></a> </td>
  </tr>
  <tr>
    <td class="xl71">1 x Spacerplaat, foamed PVC wit 10 MM RAL 9003</td>
    <td class="xl76"><img src="WoordklokSK6812_files/Spacer.JPG" alt="spacerplaat" width="109" height="90" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x PCB SK6812-klok </td>
    <td class="xl75"><img alt="PCB" src="Bouwpakketkleur_files/PCB-V03-WP_20171128_002.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x 1000 µF capacitor </td>
    <td class="xl75"><img alt="1000 µF condensator " src="Bouwpakket_files/image011.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x 1.1kΩ resistor </td>
    <td class="xl75">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">1 x 2.2kΩ resistor </td>
    <td class="xl75">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">1 x 470kΩ resistor (1-3 needed) </td>
    <td class="xl75"><img alt="470O weerstand " src="Bouwpakket_files/470Ohm.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x LED red </td>
    <td class="xl75"><img border=0
  width=94 height=26 src="Bouwpakket_files/image018.jpg" class="auto-style11"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x LED yellow </td>
    <td class="xl75"><img border=0
  width=93 height=24 src="Bouwpakket_files/image019.jpg" class="auto-style11"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x 2-pin female connector </td>
    <td class="xl75">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">1 x 3-pin female connector </td>
    <td class="xl75">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">1 x 5-pin female connector </td>
    <td class="xl75">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">2 x 6-pin female connector </td>
    <td class="xl75">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">2 x 15-pin female connector </td>
    <td class="xl75">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">1 x Arduino Nano Every </td>
    <td class="xl75">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">1 x SK6812 LED-strip 625 LEDs </td>
    <td class="xl75"><img alt="WS2812" src="Bouwpakketkleur_files/WS2812strip.JPG" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl67">1 x&nbsp; KY-040 Keyes Rotary Encoder </td>
    <td class="xl74"><img alt="KY-040 Keyes Rotary Encoder" src="Bouwpakket_files/image026.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x 4x3 membrane keypad </td>
    <td class="xl75">
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p></td>
  </tr>
  <tr>
    <td class="xl70">1 x RCT DS3231 clock module <br>
      ZS-042 </td>
    <td class="xl75"><img alt="DS3231" src="Bouwpakket_files/image022.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x CR 2032 3V lithium battery </td>
    <td class="xl75"><img alt="Batterij" src="Bouwpakket_files/image023.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x light sensor </td>
    <td class="xl75"><img alt="Lichtsensor" src="Bouwpakket_files/image027.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl71">1 x 22kΩ resistor </td>
    <td class="xl76"><img alt="22kO weerstand " src="Bouwpakket_files/image007.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl70">1 x Adapter 5V DC, &gt;2 Ampere </td>
    <td class="xl75"><img alt="Voeding220V" src="Bouwpakketkleur_files/Voeding%205V2A-220V.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl67">1 x Verlichtingsgrondplaat 3 x 300 x 300 mm MDF-plaat </td>
    <td class="xl74">&nbsp; </td>
  </tr>
  <tr>
    <td class="xl70">1 x Adapter 5V DC, &gt;2 Ampere </td>
    <td class="xl91"><img alt="Voeding" src="Bouwpakketkleur_files/Voeding%205V3A.jpg" width="100" class="auto-style3"> </td>
  </tr>
  <tr>
    <td class="xl67">Wireless Serial 6 Pin Bluetooth RF Transceiver Module HM10 (voor Iphone, IPad) </td>
    <td class="xl74"><img alt="HM10 BT" src="Bouwpakket_files/HM-10.jpg" width="100" class="auto-style3"> </td>
  </tr>
</table>
<p class="auto-style3"><strong><br class="auto-style3">
    Assembling the lighting base plate <br class="auto-style3">
  <br class="auto-style3">
  <img alt="Verlichtings grondplaat" src="4LanguageClock/IMG_5345.JPG"><br class="auto-style3">
</strong><br class="auto-style3">
</p>
<p>The distance between the LEDs on the strip is suitable to make a clock of 50 
x 50 cm (60 LEDs/m).<br>You can choose to stick the 625 LEDs of the clock in 25 
rows with 25 LEDs or only LEDs behind the letters that should light up.<br>The 
latter method has the advantage that fewer LEDs are needed and that you have to 
drill fewer holes in the spacer plate. But .. there are many more soldering 
points, each of which can cause malfunctions.<br>The software also has a digital 
time mode mode that you can only use if you install all 625 LEDs.<br><br>You can also 
choose to cut out the illuminated words in a 1 cm thick MDF board with a jigsaw.<br>
Paint the insides white otherwise the white light will become dingy.<br>Stick 
the strips from left to right on the odd lines and from right to left on the 
even lines. Follow the arrows on the strip.<span class="auto-style3"><br></p>
<p>Apply solder to the LED strip terminal and later solder the wire in the 
solder blob.<br>A reasonable amount of current (1A) will flow at full 
load. If you are going to connect all the strips in succession, a lot of current 
will flow at the first LEDs and the wire must be thick.<br>I make a connection 
per two lines from the power wire with 30AWG = 0.25mm diameter.<br>30AWG wire 
can tolerate 0.9A current<br>or not insulated tinned copper wire of 0.6mm on one 
side of the strips the 5V connection and on the other side the earth connection.<br>
Finally, make sure that each strip has its power.<br>The spacer plate will be 
placed on the front, on top of the LEDs, and it must lie flat on the surface to 
prevent light leakage.</p>
<table><tr><font face="Verdana, Arial, Helvetica, sans-serif"><td>
<img alt="Spacerplaat" src="4LanguageClock/IMG_5347.JPG"> </td>
<td><img src="WoordklokSK6812_files/IMG_1523.jpg"></td> 
</font></tr><tr><td class="auto-style3">spacer plate</td><td class="auto-style3">
		Back side</td></tr></table><br class="auto-style3">
<p>In the signal wire between LED_PIN 5 (D5) of the Arduino and the SK6812 LED 
connection Di is a 470 Ohm resistor.<br>A 1 mF (1000 uF) capacitor is placed 
across the GND and 5V to the LED strip to dampen the turn-on voltage.<br>The 
LEDs do work without these two components (onrush preventer) but can be damaged.<br>
The onrush preventer schedule is below.<br>You can connect all components 
directly to the pins of the Arduino Nano without the printed circuit board.<br>
There is also a PCB to which everything can be soldered.<br>This printed circuit 
board can also be used for the <a href="https://github.com/ednieuw/Fibonacciclock">Fibonacci clock</a>.<br>
</p>
<p>At the bottom of this page 
the latest PCB version with more connections.</p>
<table><tr><td><img alt="Onrush" src="Bouwpakketkleur_files/Onrush%20preventer_pcb.jpg" class="auto-style3"></td>
<td><img alt="PCB V03" src="Bouwpakketkleur_files/PCB-V03-WP_20171128_002.jpg" class="auto-style3"></td>
</tr><tr><td colspan="2"><img alt="PCB V03" height="699" src="Bouwpakketkleur_files/FibonacciklokPCBV03_pcb.jpg" width="906" class="auto-style3"><br class="auto-style3"></td></tr><tr><td colspan="2"><img src="WoordklokSK6812_files/IMG_1522.JPG" class="auto-style3"></td>
</tr><tr><td class="auto-style3">
	Connections in the case</td><td class="auto-style3">&nbsp;
	</td></tr></table><span class="style1"><br>// digitale port connections on Arduino&nbsp; D2 - D13<br>
	</span>
<pre>enum DigitalPinAssignments {      // Digital hardware constants ATMEGA 328 ----
 RX           = 0,                // Connects to Bluetooth TX
 TX           = 1,                // Connects to Bluetooth RX
 DCF_PIN      = 2,                // DCFPulse on interrupt  pin
 encoderPinA  = 3,                // right (labeled DT on decoder)on interrupt  pin
 clearButton  = 4,                // switch (labeled SW on decoder)
 LED_PIN      = 5,                // Pin to control colour SK6812/WS2812 LEDs
 BT_TX        = 6,                // Connects to Bluetooth RX
 BT_RX        = 7,                // Connects to Bluetooth TX
 HC_12TX      = 6,                // HC-12 TX Pin  // note RX and TX are reversed compared with a BT Module
 HC_12RX      = 7,                // HC-12 RX Pin 
 encoderPinB  = 8,                // left (labeled CLK on decoder)no interrupt pin  
 secondsPin   = 9,
 HeartbeatLED = 10,               // PIN10        = 10,                        // PIN 10 
 DCFgood      = 11,               // DCF-signal &gt; 50    //PIN11        = 11,   // PIN 11
 PIN12        = 12,               // PIN 12             // led = 12,          // MKR1010
 DCF_LED_Pin  = 13,               // DCF signal
 };
 
enum AnaloguePinAssignments {     // Analogue hardware constants ----
 EmptyA0      = 0,                // Empty
 EmptyA1      = 1,                // Empty
 PhotoCellPin = 2,                // LDR pin
 EmptyA3      = 3,                // Empty
 SDA_pin      = 4,                // SDA pin
 SCL_pin      = 5,                // SCL pin
 EmptyA6     =  6,                // Empty
 EmptyA7     =  7};               // Empty</pre>
<span class="style2">&nbsp;</span><p><strong>Assembling the clock</strong><br>
<br>It is convenient to tape the clock parts with paper masking tape. This 
adhesive tape comes off easily.<br>Stick the lighting plate and spacer together.<br>
Stick a white sheet of paper over the spacer. Paper gives a nice drawing to the 
illuminated letters.<br>Place the word plate over the paper and fix it with 
adhesive tape as well.<br>With a hardwood clock, depending on the version, the 
word plate is slid into the slot in the cabinet. Then assemble the fourth, 
bottom part of the cabinet.<br>Glue this or stick it temporarily with adhesive 
tape.<br>If everything is labeled correctly, the clock, rotary encoder, LDR, 
power supply can be connected.<br>Assemble the cabinet.</p>
<p><br><br></p>
<p><strong>Bluetooth connection</strong><br><br>A Bluetooth connection to the clock can be made 
with the HC05 or HM-10 Bluetooth module.<br>The HC05 only communicates with 
Android. The HM-10 communicates with both Android and Apple IOS.<br>The link 
below describes to which pins the module is connected and how the name of the 
module is changed.<br>With a Bluetooth terminal app on the phone, the time can 
be sent to the clock as hhmmss or hhmm.<br>The clock sends data back to the 
terminal app every minute.<br>Bluetooth terminal apps are available for Windows 
phone, Android and 
<a href="https://apps.apple.com/tt/app/bleserial-hm-10/id1602239700#?platform=iphone">
IPhone</a>.<br>The Bluetooth terminal programs are also available 
for PCs.<br>The Bluetooth module communicates between RX (read) and TX 
(transmit) at 3.3V.<br>It is possible to connect it directly to the Arduino 
ports but it will extend the life of the module if the voltage is lowered to 
3.3V.<br>This can be done with a 3.3V-5V TTL Level Logic Level Converter module, 
or with a voltage divider circuit with resistors as shown below.<br>You can also 
mount the resistors in the wiring from the module to the printed circuit board.</p>
<p><font class="auto-style3"><br><br><img alt="Schema BT" src="Bouwpakket_files/Bluetooth3_3V.jpg"><br>
</font><br></p>
<p><strong>Bluetooth with the HM10 BLE for Android and Apple IOS</strong><br>
With this HM10 BLE module you can communicate with Apple IOS and Android.<br>After that, commands can be sent 
with a serial terminal program (<a href="https://apps.apple.com/tt/app/bleserial-hm-10/id1602239700#?platform=iphone">BLEserial HM-10 for IOS 
</a>or for Android BLE 
scanner from Blue Pixel Technologies) and the clock output can be collected.<br>
<br>Linked via an FTDI, AT commands can be given with the Arduino serial monitor 
with the Bluetooth module.<br>See previous section for AT commands<br>
AT+NAMEnewname gives the module the name: newname</p>
<p><a href="https://ednieuw.home.xs4all.nl/BLESerial/BLESerialUsage.html">More info about Bluetooth 
communication on this page</a></p>
<p><font><br><img alt="HM-10 BT" src="Bouwpakket_files/HM10-FTDI.jpg"><br>
<br><strong>DCF77-ontvangst met DCF-2 module </strong><br><br><img alt="DCF-2" src="Bouwpakket_files/DCF-2.jpg"><br>
</font></p>
<p>Unfortunately, the ICs in the color LEDs interfere with DCF reception. With 
the SK6812 LEDs the interference seems less than with WS2812 color LEDs.<br>With 
these color LEDs, the DCF receiver module must be mounted 10 cm or more from the 
LEDs.<br>The latest software versions V058 and above combine two reception 
methods;<br>the Arduino standard DCF77 library and an interrupt free method 
written by me.<br>I have combined them in the software, which increases 
efficiency by more than 50% in the event of poor reception.<br>Of the 44,000 
minute receptions, with the ferrite rod hanging 7cm from WS2812 color LEDs, 
13,000 were properly processed to a time and date by the DCF77 library and 
22,000 by the interrupt-free routine.<br>This DCF77 module has three 
connections; +, - and signal.<br>Connect the + to 5V and the - to GND.<br>Signal 
goes to pin 2.<br>NB Pin 2 was used for the rotary encoderPinB left (labeled CLK 
on decoder). This is now connected to P8.<br>(Pin 2 is an interrupt pin. For 
optimal DCF reception, responding to an interrupt is not necessary for the 
rotary encoder.<br>Look in the source of the version of the software under "PIN 
Assigments" for the correct connection.</p>
<p><font class="auto-style3"><br><a href="https://ednieuw.home.xs4all.nl/Woordklok/DCF77/DCF77_Arduino.html">Here some 
background information DCF</a></font></p>
<p>&nbsp;</p>
<p class="auto-style3"><a href="Libraries-needed-for-ColourClock.zip">Libraries needed</a> 
in this zip-file the needed libraries.<br>
</p><p class="auto-style3"><strong>Software<br></strong></p>
<p>The libraries used can be found in the Arduino IDE.<br>If that is no longer 
the case, the urls to the library have been put below</p>
<pre>
#include "RTClib.h"              // https://github.com/adafruit/RTClib 
#include &lt;TimeLib.h&gt;             // For time management 
#include &lt;Adafruit_NeoPixel.h&gt;   // https://github.com/adafruit/Adafruit_NeoPixel 
#include &lt;SoftwareSerial.h&gt;      // For Bluetooth
#include &lt;Encoder.h&gt;             // http://www.pjrc.com/teensy/td_libs_Encoder.html                      
#include "DCF77.h"               // http://playground.arduino.cc/Code/DCF77 </pre>
<p class="auto-style2"><font class="auto-style3">
<strong>PCB V14</strong><br></font>The latest PCB versions
<span class="auto-style3"> 
<a href="WoordklokSK6812_files/Colour%20Word%20Clock%20PCBV14.fzz">V14</a>
</span>&nbsp;of the PCB have fixed connections for the most commonly used parts.<br>
It is now possible to choose whether the serial connection to the Bluetooth 
module is via the standard connections<br>0 and 1, TX and RX, or whether it goes 
through terminals D6 and D7.<br>In the current version, D6 and D7 are used for 
the Bluetooth module and the pads at D6 and D7 must be soldered closed.<br>The 
signal wire in V14 to the LEDs has been moved relative to V13 so that the 
position of the connections corresponds to the LED strip.</p>
<br>&nbsp;<img alt="PCB versie V14" src="WoordklokSK6812_files/ColourWordClockPCBV13.jpg"><br>
<img alt="PCB V13" src="WoordklokSK6812_files/V13PCB.JPG"><br>
<br class="auto-style3">
<p class="auto-style2"><font class="auto-style3">
</font></p>
